{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./demo/demo.coffee"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","RRule","getFormValues","getOptionsCode","makeRows","rrule","$form","paramObj","$","each","serializeArray","_","kv","makeArray","push","options","days","k","v","results","FREQUENCIES","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","join","Array","map","wday","console","log","weekday","MO","dates","cells","cls","date","index","part","parts","prevParts","prevStates","states","j","len","length","toString","split","results1","len1","$tabs","activateTab","processHash","$a","id","attr","find","removeClass","addClass","hide","show","focus","change","href","this","text","appendTo","on","$code","parents","val","$in","e","getDay","html","init","inputMethod","makeRule","rfc","rule","values","fromText","fromString","TU","WE","TH","FR","SA","SU","Date","parse","getTime","getTimezoneOffset","test","parseInt","error","append","String","toText","origOptions","all","count","arg","hash","match","method","location","substring","exec","window"],"mappings":"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","file":"demo.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","RRule = rrule.RRule\n\ngetFormValues = ($form) ->\n    paramObj = {}\n    $.each $form.serializeArray(), (_, kv) ->\n        if paramObj.hasOwnProperty(kv.name)\n            paramObj[kv.name] = $.makeArray(paramObj[kv.name])\n            paramObj[kv.name].push kv.value\n        else\n            paramObj[kv.name] = kv.value\n\n    paramObj\n\n\ngetOptionsCode = (options) ->\n    days = [\n        \"RRule.MO\"\n        \"RRule.TU\"\n        \"RRule.WE\"\n        \"RRule.TH\"\n        \"RRule.FR\"\n        \"RRule.SA\"\n        \"RRule.SU\"\n    ]\n\n    items = for k, v of options\n        if v == null\n            v = 'null'\n        else if k is 'freq'\n            v = 'RRule.' + RRule.FREQUENCIES[v]\n        else if k in [\"dtstart\", \"until\"]\n            v = \"new Date(\" + [\n                v.getFullYear()\n                v.getMonth()\n                v.getDate()\n                v.getHours()\n                v.getMinutes()\n                v.getSeconds()\n            ].join(', ') + \")\"\n        else if k is \"byweekday\"\n            if v instanceof Array\n                v = v.map (wday)->\n                    console.log 'wday', wday\n                    s = days[wday.weekday]\n                    if wday.n\n                        s+= '.nth(' + wday.n + ')'\n                    s\n            else\n                v = days[v.weekday]\n        else if k is \"wkst\"\n            if v is RRule.MO\n                continue\n            v = days[v.weekday]\n\n        if v instanceof Array\n            v = '[' + v.join(', ') + ']'\n\n        console.log k, ' =', v\n        \"#{k}: #{v}\"\n\n    \"{\\n  #{items.join(',\\n  ')}\\n}\"\n\n\nmakeRows = (dates)->\n    prevParts = []\n    prevStates = []\n    index = 1\n    rows = for date in dates\n\n        states = []\n        parts = date.toString().split(' ')\n\n        cells = for part, i in parts\n            if part != prevParts[i]\n                states[i] = not prevStates[i]\n            else\n                states[i] = prevStates[i]\n            cls = if states[i] then 'a' else 'b'\n            \"<td class='#{ cls }'>#{ part }</td>\"\n\n        prevParts = parts\n        prevStates = states\n\n        \"<tr><td>#{ index++ }</td>#{ cells.join('\\n') }</tr>\"\n\n    rows.join('\\n\\n')\n\n\n$ ->\n    $tabs = $(\"#tabs\")\n\n    activateTab = ($a) ->\n        id = $a.attr(\"href\").split(\"#\")[1]\n        $tabs.find(\"a\").removeClass \"active\"\n        $a.addClass \"active\"\n        $(\"#input-types section\").hide()\n        $(\"#input-types #\" + id).show().find(\"input:first\").focus().change()\n\n\n    $(\"#input-types section\").hide().each ->\n        $(\"<a />\",\n          href: \"#\" + $(this).attr(\"id\")\n        ).text($(this).find(\"h3\").hide().text()).appendTo($tabs).on \"click\", ->\n            activateTab $(this)\n            false\n\n    $(\".examples code\").on \"click\", ->\n        $code = $(this)\n        $code.parents(\"section:first\").find(\"input\").val($code.text()).change()\n\n    $(\"input, select\").on 'keyup change', ->\n        $in = $(this)\n        $section = $in.parents(\"section:first\")\n        inputMethod = $section.attr(\"id\").split(\"-\")[0]\n\n        switch inputMethod\n            when \"text\"\n                makeRule = -> RRule.fromText($in.val())\n                init = \"RRule.fromText(\\\"\" + @value + \"\\\")\"\n            when  \"rfc\"\n                makeRule = => RRule.fromString(@value)\n                init = \"RRule.fromString(\\\"\" + @value + \"\\\")\"\n            when 'options'\n                values = getFormValues($in.parents(\"form\"))\n                options = {}\n                days = [\n                    RRule.MO\n                    RRule.TU\n                    RRule.WE\n                    RRule.TH\n                    RRule.FR\n                    RRule.SA\n                    RRule.SU\n                ]\n                getDay = (i)-> days[i]\n\n                for key, value of values\n\n                    if not value\n                        continue\n                    else if key in ['dtstart', 'until']\n                        date = new Date(Date.parse(value))\n                        value = new Date(date.getTime() + (date.getTimezoneOffset() * 60 * 1000))\n                    else if key is 'byweekday'\n                        if value instanceof Array\n                            value = value.map(getDay)\n                        else\n                            value = getDay(value)\n                    else if /^by/.test(key)\n                        if not (value instanceof Array)\n                            value = value.split(/[,\\s]+/)\n                        value = (v for v in value when v)\n                        value = value.map (n) -> parseInt(n, 10)\n                    else\n                        value = parseInt(value, 10)\n\n                    if key is 'wkst'\n                        value = getDay(value)\n\n                    if key is 'interval' and (value is 1 or not value)\n                        continue\n\n                    options[key] = value\n\n                makeRule = -> new RRule(options)\n                init = \"new RRule(\" + getOptionsCode(options) + \")\"\n                console.log options\n\n        $(\"#init\").html init\n        $(\"#rfc-output a\").html \"\"\n        $(\"#text-output a\").html \"\"\n        $(\"#options-output\").html \"\"\n        $(\"#dates\").html \"\"\n\n        try\n            rule = makeRule()\n        catch e\n            $(\"#init\").append($('<pre class=\"error\"/>').text('=> ' + String(e||null)))\n            return\n\n        rfc = rule.toString()\n        text = rule.toText()\n        $(\"#rfc-output a\").text(rfc).attr('href', \"#/rfc/#{rfc}\")\n        $(\"#text-output a\").text(text).attr('href', \"#/text/#{text}\")\n        $(\"#options-output\").text(getOptionsCode(rule.origOptions))\n        if inputMethod is 'options'\n            $(\"#options-output\").parents('tr').hide()\n        else\n            $(\"#options-output\").parents('tr').show()\n        max = 500\n        dates = rule.all (date, i)->\n            if not rule.options.count and i == max\n                return false  # That's enough\n            return true\n\n        html = makeRows dates\n        if not rule.options.count\n            html += \"\"\"\n                <tr><td colspan='7'><em>Showing first #{max} dates, set\n                <code>count</code> to see more.</em></td></tr>\n            \"\"\"\n        $(\"#dates\").html html\n\n    activateTab $tabs.find(\"a:first\")\n\n    processHash = ->\n        hash = location.hash.substring(1)\n        if hash\n            match = /^\\/(rfc|text)\\/(.+)$/.exec(hash)\n            if match\n                method = match[1]  # rfc | text\n                arg = match[2]\n                activateTab($(\"a[href='##{method}-input']\"))\n                $(\"##{method}-input input:first\").val(arg).change()\n    processHash()\n    $(window).on('hashchange', processHash)\n"],"sourceRoot":""}